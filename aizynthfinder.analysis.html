<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>aizynthfinder.analysis package &#8212; aizynthfinder 4.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=a66d8bb5" />
    <script src="_static/documentation_options.js?v=2f20d6c1"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="aizynthfinder.chem package" href="aizynthfinder.chem.html" />
    <link rel="prev" title="aizynthfinder package" href="aizynthfinder.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">aizynthfinder</a></h1>



<p class="blurb">A fast, robust and flexible software for retrosynthetic planning</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gui.html">Graphical user interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_interface.html">Python interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="stocks.html">Stocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="scoring.html">Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How-to</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="aizynthfinder.html">aizynthfinder package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aizynthfinder.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">aizynthfinder.analysis package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-aizynthfinder.analysis.routes">aizynthfinder.analysis.routes module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection"><code class="docutils literal notranslate"><span class="pre">RouteCollection</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.from_analysis"><code class="docutils literal notranslate"><span class="pre">RouteCollection.from_analysis()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.dicts"><code class="docutils literal notranslate"><span class="pre">RouteCollection.dicts</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.images"><code class="docutils literal notranslate"><span class="pre">RouteCollection.images</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.jsons"><code class="docutils literal notranslate"><span class="pre">RouteCollection.jsons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.cluster"><code class="docutils literal notranslate"><span class="pre">RouteCollection.cluster()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.combined_reaction_trees"><code class="docutils literal notranslate"><span class="pre">RouteCollection.combined_reaction_trees()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.compute_scores"><code class="docutils literal notranslate"><span class="pre">RouteCollection.compute_scores()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.dict_with_extra"><code class="docutils literal notranslate"><span class="pre">RouteCollection.dict_with_extra()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.dict_with_scores"><code class="docutils literal notranslate"><span class="pre">RouteCollection.dict_with_scores()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.distance_matrix"><code class="docutils literal notranslate"><span class="pre">RouteCollection.distance_matrix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.make_dicts"><code class="docutils literal notranslate"><span class="pre">RouteCollection.make_dicts()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.make_images"><code class="docutils literal notranslate"><span class="pre">RouteCollection.make_images()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.make_jsons"><code class="docutils literal notranslate"><span class="pre">RouteCollection.make_jsons()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection.rescore"><code class="docutils literal notranslate"><span class="pre">RouteCollection.rescore()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#module-aizynthfinder.analysis.tree_analysis">aizynthfinder.analysis.tree_analysis module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis"><code class="docutils literal notranslate"><span class="pre">TreeAnalysis</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.best"><code class="docutils literal notranslate"><span class="pre">TreeAnalysis.best()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.pareto_front"><code class="docutils literal notranslate"><span class="pre">TreeAnalysis.pareto_front()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.sort"><code class="docutils literal notranslate"><span class="pre">TreeAnalysis.sort()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.tree_statistics"><code class="docutils literal notranslate"><span class="pre">TreeAnalysis.tree_statistics()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#module-aizynthfinder.analysis.utils">aizynthfinder.analysis.utils module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#aizynthfinder.analysis.utils.RouteSelectionArguments"><code class="docutils literal notranslate"><span class="pre">RouteSelectionArguments</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.utils.RouteSelectionArguments.nmin"><code class="docutils literal notranslate"><span class="pre">RouteSelectionArguments.nmin</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.utils.RouteSelectionArguments.nmax"><code class="docutils literal notranslate"><span class="pre">RouteSelectionArguments.nmax</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.utils.RouteSelectionArguments.return_all"><code class="docutils literal notranslate"><span class="pre">RouteSelectionArguments.return_all</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#aizynthfinder.analysis.utils.CombinedReactionTrees"><code class="docutils literal notranslate"><span class="pre">CombinedReactionTrees</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.utils.CombinedReactionTrees.to_dict"><code class="docutils literal notranslate"><span class="pre">CombinedReactionTrees.to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#aizynthfinder.analysis.utils.CombinedReactionTrees.to_visjs_page"><code class="docutils literal notranslate"><span class="pre">CombinedReactionTrees.to_visjs_page()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#module-aizynthfinder.analysis">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.chem.html">aizynthfinder.chem package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.context.html">aizynthfinder.context package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.interfaces.html">aizynthfinder.interfaces package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.search.html">aizynthfinder.search package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.tools.html">aizynthfinder.tools package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.utils.html">aizynthfinder.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#module-aizynthfinder.aizynthfinder">aizynthfinder.aizynthfinder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#module-aizynthfinder.reactiontree">aizynthfinder.reactiontree module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#module-aizynthfinder">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sequences.html">Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="relationships.html">Relationships</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="aizynthfinder.html">aizynthfinder package</a><ul>
      <li>Previous: <a href="aizynthfinder.html" title="previous chapter">aizynthfinder package</a></li>
      <li>Next: <a href="aizynthfinder.chem.html" title="next chapter">aizynthfinder.chem package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="aizynthfinder-analysis-package">
<h1>aizynthfinder.analysis package<a class="headerlink" href="#aizynthfinder-analysis-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-aizynthfinder.analysis.routes">
<span id="aizynthfinder-analysis-routes-module"></span><h2>aizynthfinder.analysis.routes module<a class="headerlink" href="#module-aizynthfinder.analysis.routes" title="Link to this heading">¶</a></h2>
<p>Module containing classes to store and manipulate collections of synthetic routes.</p>
<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.analysis.routes.</span></span><span class="sig-name descname"><span class="pre">RouteCollection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction_trees</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds a collections of reaction routes.</p>
<p>If can be the top scored nodes, their scores and
the reaction trees created from them.
It can also be a cluster of such routes.</p>
<p>The class has the functionality to compute collective results
for the different routes such as images.</p>
<p>Properties of individual route can be obtained with simple indexing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">route0</span> <span class="o">=</span> <span class="n">collection</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_scores</strong> – all the computed scores for the routes</p></li>
<li><p><strong>nodes</strong> – the top-ranked MCTS-like nodes</p></li>
<li><p><strong>scores</strong> – initial scores of top-ranked nodes or routes</p></li>
<li><p><strong>reaction_trees</strong> – the reaction trees created from the top-ranked nodes</p></li>
<li><p><strong>clusters</strong> – the created clusters from the collection</p></li>
<li><p><strong>route_metadata</strong> – the metadata of the reaction trees</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>reaction_trees</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.html#aizynthfinder.reactiontree.ReactionTree" title="aizynthfinder.reactiontree.ReactionTree"><em>ReactionTree</em></a><em>]</em>) – the trees to base the collection on</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.from_analysis">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.from_analysis" title="Link to this definition">¶</a></dt>
<dd><p>Create a collection from a tree analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>analysis</strong> (<a class="reference internal" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis" title="aizynthfinder.analysis.tree_analysis.TreeAnalysis"><em>TreeAnalysis</em></a>) – the tree analysis to use</p></li>
<li><p><strong>selection</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#aizynthfinder.analysis.utils.RouteSelectionArguments" title="aizynthfinder.analysis.utils.RouteSelectionArguments"><em>RouteSelectionArguments</em></a><em>]</em>) – selection criteria for the routes</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the created collection</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#aizynthfinder.analysis.routes.RouteCollection" title="aizynthfinder.analysis.routes.RouteCollection">RouteCollection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.dicts">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dicts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">StrDict</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.dicts" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of dictionary representation of the routes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.images">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">images</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">PilImage</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.images" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of pictoral representation of the routes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.jsons">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">jsons</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.jsons" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of JSON string representation of the routes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.cluster">
<span class="sig-name descname"><span class="pre">cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_clusters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_clusters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.cluster" title="Link to this definition">¶</a></dt>
<dd><p>Cluster the route collection into a number of clusters.</p>
<p>Additional arguments to the clustering algorithm can be passed in as key-word arguments.</p>
<p>If the number of reaction trees are less than 3, no clustering will be performed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_clusters</strong> (<em>int</em>) – the desired number of clusters, if less than 2 triggers optimization</p></li>
<li><p><strong>max_clusters</strong> (<em>int</em>) – the maximum number of clusters to consider</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the cluster labels</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if the route_distance package is not installed</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.combined_reaction_trees">
<span class="sig-name descname"><span class="pre">combined_reaction_trees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recreate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.combined_reaction_trees" title="Link to this definition">¶</a></dt>
<dd><p>Return an object that combines all the reaction tree into a single reaction tree graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>recreate</strong> (<em>bool</em>) – if False will return a cached object if available, defaults to False</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the combined trees</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#aizynthfinder.analysis.utils.CombinedReactionTrees" title="aizynthfinder.analysis.utils.CombinedReactionTrees"><em>CombinedReactionTrees</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.compute_scores">
<span class="sig-name descname"><span class="pre">compute_scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">scorers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.compute_scores" title="Link to this definition">¶</a></dt>
<dd><p>Compute new scores for all routes in this collection.
They can then be accessed with the <code class="docutils literal notranslate"><span class="pre">all_scores</span></code> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>scorers</strong> (<a class="reference internal" href="aizynthfinder.context.scoring.html#aizynthfinder.context.scoring.scorers_base.Scorer" title="aizynthfinder.context.scoring.scorers_base.Scorer"><em>Scorer</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.dict_with_extra">
<span class="sig-name descname"><span class="pre">dict_with_extra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.dict_with_extra" title="Link to this definition">¶</a></dt>
<dd><p>Return the routes as dictionaries with optionally all scores and
all metadata added to the root (target) node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the routes as dictionaries</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Sequence[StrDict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.dict_with_scores">
<span class="sig-name descname"><span class="pre">dict_with_scores</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.dict_with_scores" title="Link to this definition">¶</a></dt>
<dd><p>Return the routes as dictionaries with all scores added
to the root (target) node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the routes as dictionaries</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Sequence[StrDict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.distance_matrix">
<span class="sig-name descname"><span class="pre">distance_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recreate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.distance_matrix" title="Link to this definition">¶</a></dt>
<dd><p>Compute the distance matrix between each pair of reaction trees</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>recreate</strong> (<em>bool</em>) – if False, use a cached one if available</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the square distance matrix</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>ndarray</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.make_dicts">
<span class="sig-name descname"><span class="pre">make_dicts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.make_dicts" title="Link to this definition">¶</a></dt>
<dd><p>Convert all reaction trees to dictionaries</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[StrDict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.make_images">
<span class="sig-name descname"><span class="pre">make_images</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.make_images" title="Link to this definition">¶</a></dt>
<dd><p>Convert all reaction trees to images</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[Optional[PilImage]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.make_jsons">
<span class="sig-name descname"><span class="pre">make_jsons</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.make_jsons" title="Link to this definition">¶</a></dt>
<dd><p>Convert all reaction trees to JSON strings</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.routes.RouteCollection.rescore">
<span class="sig-name descname"><span class="pre">rescore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scorer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.routes.RouteCollection.rescore" title="Link to this definition">¶</a></dt>
<dd><p>Rescore the routes in the collection, and thereby re-order them.</p>
<p>This will replace the <code class="docutils literal notranslate"><span class="pre">scores</span></code> attribute, and update the <code class="docutils literal notranslate"><span class="pre">all_scores</span></code>
attribute with another entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>scorer</strong> (<a class="reference internal" href="aizynthfinder.context.scoring.html#aizynthfinder.context.scoring.scorers_base.Scorer" title="aizynthfinder.context.scoring.scorers_base.Scorer"><em>Scorer</em></a>) – the scorer to use</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-aizynthfinder.analysis.tree_analysis">
<span id="aizynthfinder-analysis-tree-analysis-module"></span><h2>aizynthfinder.analysis.tree_analysis module<a class="headerlink" href="#module-aizynthfinder.analysis.tree_analysis" title="Link to this heading">¶</a></h2>
<p>Module containing classes to perform analysis of the tree search results.</p>
<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.analysis.tree_analysis.TreeAnalysis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.analysis.tree_analysis.</span></span><span class="sig-name descname"><span class="pre">TreeAnalysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_tree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that encapsulate various analysis that can be
performed on a search tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scorers</strong> – the objects used to score the nodes</p></li>
<li><p><strong>search_tree</strong> – the search tree</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>search_tree</strong> (<em>Union</em><em>[</em><a class="reference internal" href="aizynthfinder.search.mcts.html#aizynthfinder.search.mcts.search.MctsSearchTree" title="aizynthfinder.search.mcts.search.MctsSearchTree"><em>MctsSearchTree</em></a><em>, </em><a class="reference internal" href="aizynthfinder.search.html#aizynthfinder.search.andor_trees.AndOrSearchTreeBase" title="aizynthfinder.search.andor_trees.AndOrSearchTreeBase"><em>AndOrSearchTreeBase</em></a><em>]</em>) – the search tree to do the analysis on</p></li>
<li><p><strong>scorer</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="aizynthfinder.context.scoring.html#aizynthfinder.context.scoring.scorers_base.Scorer" title="aizynthfinder.context.scoring.scorers_base.Scorer"><em>Scorer</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="aizynthfinder.context.scoring.html#aizynthfinder.context.scoring.scorers_base.Scorer" title="aizynthfinder.context.scoring.scorers_base.Scorer"><em>Scorer</em></a><em>]</em><em>]</em><em>]</em>) – the object used to score the nodes, defaults to StateScorer</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.tree_analysis.TreeAnalysis.best">
<span class="sig-name descname"><span class="pre">best</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.best" title="Link to this definition">¶</a></dt>
<dd><p>Returns the route or MCTS-like node with the highest score.
If several routes have the same score, it will return the first</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the top scoring node or route</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if this is a multi-objective analysis, a single best solution cannot be return</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_Solution</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.tree_analysis.TreeAnalysis.pareto_front">
<span class="sig-name descname"><span class="pre">pareto_front</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.pareto_front" title="Link to this definition">¶</a></dt>
<dd><p>Returns the Routes or MCTS-like Nodes that are the Pareto Front in the Multi-Objective search.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the pareto front solutions.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if this is a single-objective analysis, there is no Pareto-front</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[_Solution, …]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.tree_analysis.TreeAnalysis.sort">
<span class="sig-name descname"><span class="pre">sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.sort" title="Link to this definition">¶</a></dt>
<dd><p>Sort and select the nodes or routes in the search tree.</p>
<p>The score for each solution is a dictionary of scores,
one for each of the objectives.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>selection</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#aizynthfinder.analysis.utils.RouteSelectionArguments" title="aizynthfinder.analysis.utils.RouteSelectionArguments"><em>RouteSelectionArguments</em></a><em>]</em>) – selection criteria for the routes</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the sorted and selected items</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the scores of the sorted items</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[_AnyListOfSolutions, Sequence[Dict[str, float]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.tree_analysis.TreeAnalysis.tree_statistics">
<span class="sig-name descname"><span class="pre">tree_statistics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.tree_analysis.TreeAnalysis.tree_statistics" title="Link to this definition">¶</a></dt>
<dd><p>Returns statistics of the tree</p>
<p>Currently it returns the number of nodes, the maximum number of transforms,
maximum number of children, top score, if the top score route is solved,
the number of molecule in the top score node, and information on pre-cursors</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the statistics</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>StrDict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-aizynthfinder.analysis.utils">
<span id="aizynthfinder-analysis-utils-module"></span><h2>aizynthfinder.analysis.utils module<a class="headerlink" href="#module-aizynthfinder.analysis.utils" title="Link to this heading">¶</a></h2>
<p>Helper routines and class for the <cite>aizynthfinder.analysis</cite> package.
To avoid clutter in that package, larger utility algorithms are placed herein.</p>
<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.RouteSelectionArguments">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.analysis.utils.</span></span><span class="sig-name descname"><span class="pre">RouteSelectionArguments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.utils.RouteSelectionArguments" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Selection arguments for the tree analysis class</p>
<p>If <cite>return_all</cite> is False, it will return at least <cite>nmin</cite> routes and if routes have the same
score it will return them as well up to <cite>nmax</cite> routes.</p>
<p>If <cite>return_all</cite> is True, it will return all solved routes if there is at least one is solved, otherwise
the <cite>nmin</cite> and <cite>nmax</cite> will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nmin</strong> (<em>int</em>)</p></li>
<li><p><strong>nmax</strong> (<em>int</em>)</p></li>
<li><p><strong>return_all</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.RouteSelectionArguments.nmin">
<span class="sig-name descname"><span class="pre">nmin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#aizynthfinder.analysis.utils.RouteSelectionArguments.nmin" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.RouteSelectionArguments.nmax">
<span class="sig-name descname"><span class="pre">nmax</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">25</span></em><a class="headerlink" href="#aizynthfinder.analysis.utils.RouteSelectionArguments.nmax" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.RouteSelectionArguments.return_all">
<span class="sig-name descname"><span class="pre">return_all</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#aizynthfinder.analysis.utils.RouteSelectionArguments.return_all" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.CombinedReactionTrees">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.analysis.utils.</span></span><span class="sig-name descname"><span class="pre">CombinedReactionTrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction_trees</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.utils.CombinedReactionTrees" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulation of an algorithm that combines several reaction trees into a
larger bipartite graph with all reactions and molecules.</p>
<p>The reactions at a specific level of the reaction trees are grouped based
on the reaction smiles.</p>
<dl class="field-list simple">
<dt class="field-odd">Params reactions_trees<span class="colon">:</span></dt>
<dd class="field-odd"><p>the list of reaction trees to combine</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>reaction_trees</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.html#aizynthfinder.reactiontree.ReactionTree" title="aizynthfinder.reactiontree.ReactionTree"><em>ReactionTree</em></a><em>]</em>)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.CombinedReactionTrees.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.utils.CombinedReactionTrees.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Returns the graph as a dictionary in a pre-defined format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the combined reaction trees</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>StrDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.analysis.utils.CombinedReactionTrees.to_visjs_page">
<span class="sig-name descname"><span class="pre">to_visjs_page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_stock_colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.analysis.utils.CombinedReactionTrees.to_visjs_page" title="Link to this definition">¶</a></dt>
<dd><p>Create a visualization of the combined reaction tree using the vis.js network library.</p>
<p>The HTML page and all the images will be put into a tar-ball.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – the name of the tarball</p></li>
<li><p><strong>in_stock_colors</strong> (<em>Optional</em><em>[</em><em>FrameColors</em><em>]</em>) – the colors around molecules, defaults to {True: “green”, False: “orange”}</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-aizynthfinder.analysis">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-aizynthfinder.analysis" title="Link to this heading">¶</a></h2>
<p>Sub-package containing analysis routines</p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2020-2025, Molecular AI group.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/aizynthfinder.analysis.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>