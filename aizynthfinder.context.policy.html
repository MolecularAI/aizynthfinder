<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>aizynthfinder.context.policy package &#8212; aizynthfinder 4.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=a66d8bb5" />
    <script src="_static/documentation_options.js?v=2f20d6c1"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="aizynthfinder.context.scoring package" href="aizynthfinder.context.scoring.html" />
    <link rel="prev" title="aizynthfinder.context package" href="aizynthfinder.context.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">aizynthfinder</a></h1>



<p class="blurb">A fast, robust and flexible software for retrosynthetic planning</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gui.html">Graphical user interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_interface.html">Python interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="stocks.html">Stocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="scoring.html">Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How-to</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="aizynthfinder.html">aizynthfinder package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aizynthfinder.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.analysis.html">aizynthfinder.analysis package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.chem.html">aizynthfinder.chem package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="aizynthfinder.context.html">aizynthfinder.context package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="aizynthfinder.context.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">aizynthfinder.context.policy package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l6"><a class="reference internal" href="#module-aizynthfinder.context.policy.expansion_strategies">aizynthfinder.context.policy.expansion_strategies module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy"><code class="docutils literal notranslate"><span class="pre">ExpansionStrategy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy.get_actions"><code class="docutils literal notranslate"><span class="pre">ExpansionStrategy.get_actions()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy.reset_cache"><code class="docutils literal notranslate"><span class="pre">ExpansionStrategy.reset_cache()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.MultiExpansionStrategy"><code class="docutils literal notranslate"><span class="pre">MultiExpansionStrategy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.MultiExpansionStrategy.get_actions"><code class="docutils literal notranslate"><span class="pre">MultiExpansionStrategy.get_actions()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy"><code class="docutils literal notranslate"><span class="pre">TemplateBasedExpansionStrategy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy.get_actions"><code class="docutils literal notranslate"><span class="pre">TemplateBasedExpansionStrategy.get_actions()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy.reset_cache"><code class="docutils literal notranslate"><span class="pre">TemplateBasedExpansionStrategy.reset_cache()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedDirectExpansionStrategy"><code class="docutils literal notranslate"><span class="pre">TemplateBasedDirectExpansionStrategy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedDirectExpansionStrategy.get_actions"><code class="docutils literal notranslate"><span class="pre">TemplateBasedDirectExpansionStrategy.get_actions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#module-aizynthfinder.context.policy.filter_strategies">aizynthfinder.context.policy.filter_strategies module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy"><code class="docutils literal notranslate"><span class="pre">FilterStrategy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy.apply"><code class="docutils literal notranslate"><span class="pre">FilterStrategy.apply()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.BondFilter"><code class="docutils literal notranslate"><span class="pre">BondFilter</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.BondFilter.apply"><code class="docutils literal notranslate"><span class="pre">BondFilter.apply()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.QuickKerasFilter"><code class="docutils literal notranslate"><span class="pre">QuickKerasFilter</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.QuickKerasFilter.apply"><code class="docutils literal notranslate"><span class="pre">QuickKerasFilter.apply()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.QuickKerasFilter.feasibility"><code class="docutils literal notranslate"><span class="pre">QuickKerasFilter.feasibility()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.ReactantsCountFilter"><code class="docutils literal notranslate"><span class="pre">ReactantsCountFilter</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.ReactantsCountFilter.apply"><code class="docutils literal notranslate"><span class="pre">ReactantsCountFilter.apply()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FrozenSubstructureFilter"><code class="docutils literal notranslate"><span class="pre">FrozenSubstructureFilter</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FrozenSubstructureFilter.apply"><code class="docutils literal notranslate"><span class="pre">FrozenSubstructureFilter.apply()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#module-aizynthfinder.context.policy.policies">aizynthfinder.context.policy.policies module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.policies.ExpansionPolicy"><code class="docutils literal notranslate"><span class="pre">ExpansionPolicy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.get_actions"><code class="docutils literal notranslate"><span class="pre">ExpansionPolicy.get_actions()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.load"><code class="docutils literal notranslate"><span class="pre">ExpansionPolicy.load()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.load_from_config"><code class="docutils literal notranslate"><span class="pre">ExpansionPolicy.load_from_config()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.reset_cache"><code class="docutils literal notranslate"><span class="pre">ExpansionPolicy.reset_cache()</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#aizynthfinder.context.policy.policies.FilterPolicy"><code class="docutils literal notranslate"><span class="pre">FilterPolicy</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.FilterPolicy.apply"><code class="docutils literal notranslate"><span class="pre">FilterPolicy.apply()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.FilterPolicy.load"><code class="docutils literal notranslate"><span class="pre">FilterPolicy.load()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.FilterPolicy.load_from_config"><code class="docutils literal notranslate"><span class="pre">FilterPolicy.load_from_config()</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#aizynthfinder.context.policy.policies.FilterPolicy.reset_cache"><code class="docutils literal notranslate"><span class="pre">FilterPolicy.reset_cache()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#module-aizynthfinder.context.policy.utils">aizynthfinder.context.policy.utils module</a></li>
<li class="toctree-l6"><a class="reference internal" href="#module-aizynthfinder.context.policy">Module contents</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="aizynthfinder.context.scoring.html">aizynthfinder.context.scoring package</a></li>
<li class="toctree-l5"><a class="reference internal" href="aizynthfinder.context.stock.html">aizynthfinder.context.stock package</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="aizynthfinder.context.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="aizynthfinder.context.html#module-aizynthfinder.context.collection">aizynthfinder.context.collection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="aizynthfinder.context.html#module-aizynthfinder.context.config">aizynthfinder.context.config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="aizynthfinder.context.html#module-aizynthfinder.context">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.interfaces.html">aizynthfinder.interfaces package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.search.html">aizynthfinder.search package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.tools.html">aizynthfinder.tools package</a></li>
<li class="toctree-l3"><a class="reference internal" href="aizynthfinder.utils.html">aizynthfinder.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#module-aizynthfinder.aizynthfinder">aizynthfinder.aizynthfinder module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#module-aizynthfinder.reactiontree">aizynthfinder.reactiontree module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aizynthfinder.html#module-aizynthfinder">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sequences.html">Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="relationships.html">Relationships</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="aizynthfinder.html">aizynthfinder package</a><ul>
  <li><a href="aizynthfinder.context.html">aizynthfinder.context package</a><ul>
      <li>Previous: <a href="aizynthfinder.context.html" title="previous chapter">aizynthfinder.context package</a></li>
      <li>Next: <a href="aizynthfinder.context.scoring.html" title="next chapter">aizynthfinder.context.scoring package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="aizynthfinder-context-policy-package">
<h1>aizynthfinder.context.policy package<a class="headerlink" href="#aizynthfinder-context-policy-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-aizynthfinder.context.policy.expansion_strategies">
<span id="aizynthfinder-context-policy-expansion-strategies-module"></span><h2>aizynthfinder.context.policy.expansion_strategies module<a class="headerlink" href="#module-aizynthfinder.context.policy.expansion_strategies" title="Link to this heading">¶</a></h2>
<p>Module containing classes that implements different expansion policy strategies</p>
<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.expansion_strategies.</span></span><span class="sig-name descname"><span class="pre">ExpansionStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>A base class for all expansion strategies.</p>
<p>The strategy can be used by either calling the <cite>get_actions</cite> method
of by calling the instantiated class with a list of molecule.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expander</span> <span class="o">=</span> <span class="n">MyExpansionStrategy</span><span class="p">(</span><span class="s2">&quot;dummy&quot;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="n">actions</span><span class="p">,</span> <span class="n">priors</span> <span class="o">=</span> <span class="n">expander</span><span class="o">.</span><span class="n">get_actions</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span>
<span class="n">actions</span><span class="p">,</span> <span class="n">priors</span> <span class="o">=</span> <span class="n">expander</span><span class="p">(</span><span class="n">molecules</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>kwargs</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy.get_actions">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">molecules</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_molecules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy.get_actions" title="Link to this definition">¶</a></dt>
<dd><p>Get all the probable actions of a set of molecules</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>molecules</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em>) – the molecules to consider</p></li>
<li><p><strong>cache_molecules</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em><em>]</em>) – additional molecules to submit to the expansion
policy but that only will be cached for later use</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the actions and the priors of those actions</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction">RetroReaction</a>], List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy.reset_cache">
<span class="sig-name descname"><span class="pre">reset_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy.reset_cache" title="Link to this definition">¶</a></dt>
<dd><p>Reset the prediction cache</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.MultiExpansionStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.expansion_strategies.</span></span><span class="sig-name descname"><span class="pre">MultiExpansionStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.MultiExpansionStrategy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy" title="aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpansionStrategy</span></code></a></p>
<p>A base class for combining multiple expansion strategies.</p>
<p>The strategy can be used by either calling the <cite>get_actions</cite> method
or by calling the instantiated class with a list of molecules.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expansion_strategy_keys</strong> – the keys of the selected expansion strategies</p></li>
<li><p><strong>additive_expansion</strong> – a conditional setting to specify whether all the actions
and priors of the selected expansion strategies should be combined or not.
Defaults to False.</p></li>
<li><p><strong>expansion_strategy_weights</strong> – a list of weights for each expansion strategy.
The weights should sum to one. Exception is the default, where unity weight
is associated to each strategy.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>expansion_strategies</strong> – the keys of the selected expansion strategies. All keys
of the selected expansion strategies must exist in the expansion policies listed
in config</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.MultiExpansionStrategy.get_actions">
<span class="sig-name descname"><span class="pre">get_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">molecules</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_molecules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.MultiExpansionStrategy.get_actions" title="Link to this definition">¶</a></dt>
<dd><p>Get all the probable actions of a set of molecules, using the selected policies.</p>
<p>The default implementation combines all the actions and priors of the
selected expansion strategies into two lists respectively if the
‘additive_expansion’ setting is set to True. This function can be overridden by
a sub class to combine different expansion strategies in different ways.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>molecules</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em>) – the molecules to consider</p></li>
<li><p><strong>cache_molecules</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em><em>]</em>) – additional molecules to submit to the expansion
policy but that only will be cached for later use</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the actions and the priors of those actions</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>PolicyException: if the policy isn’t selected</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[List[<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction">RetroReaction</a>], List[float]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.expansion_strategies.</span></span><span class="sig-name descname"><span class="pre">TemplateBasedExpansionStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy" title="aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpansionStrategy</span></code></a></p>
<p>A template-based expansion strategy that will return <cite>TemplatedRetroReaction</cite> objects upon expansion.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_column</strong> – the column in the template file that contains the templates</p></li>
<li><p><strong>cutoff_cumulative</strong> – the accumulative probability of the suggested templates</p></li>
<li><p><strong>cutoff_number</strong> – the maximum number of templates to returned</p></li>
<li><p><strong>use_rdchiral</strong> – a boolean to apply templates with RDChiral</p></li>
<li><p><strong>use_remote_models</strong> – a boolean to connect to remote TensorFlow servers</p></li>
<li><p><strong>rescale_prior</strong> – a boolean to apply softmax to the priors</p></li>
<li><p><strong>chiral_fingerprints</strong> – if True will base expansion on chiral fingerprint</p></li>
<li><p><strong>mask</strong> – a boolean vector of masks for the reaction templates. The length of the vector should be equal to the
number of templates. It is set to None if no mask file is provided as input.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>model</strong> – the source of the policy model</p></li>
<li><p><strong>template</strong> – the path to a HDF5 file with the templates</p></li>
<li><p><strong>kwargs</strong> (<em>str</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="aizynthfinder.utils.html#aizynthfinder.utils.exceptions.PolicyException" title="aizynthfinder.utils.exceptions.PolicyException"><strong>PolicyException</strong></a> – if the length of the model output vector is not same as the
number of templates</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy.get_actions">
<span class="sig-name descname"><span class="pre">get_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">molecules</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_molecules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy.get_actions" title="Link to this definition">¶</a></dt>
<dd><p>Get all the probable actions of a set of molecules, using the selected policies and given cutoffs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>molecules</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em>) – the molecules to consider</p></li>
<li><p><strong>cache_molecules</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em><em>]</em>) – additional molecules to submit to the expansion
policy but that only will be cached for later use</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the actions and the priors of those actions</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction">RetroReaction</a>], List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy.reset_cache">
<span class="sig-name descname"><span class="pre">reset_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy.reset_cache" title="Link to this definition">¶</a></dt>
<dd><p>Reset the prediction cache</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.TemplateBasedDirectExpansionStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.expansion_strategies.</span></span><span class="sig-name descname"><span class="pre">TemplateBasedDirectExpansionStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedDirectExpansionStrategy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy" title="aizynthfinder.context.policy.expansion_strategies.TemplateBasedExpansionStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateBasedExpansionStrategy</span></code></a></p>
<p>A template-based expansion strategy that will return <cite>SmilesBasedRetroReaction</cite> objects upon expansion
by directly applying the template</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>source</strong> – the source of the policy model</p></li>
<li><p><strong>templatefile</strong> – the path to a HDF5 file with the templates</p></li>
<li><p><strong>kwargs</strong> (<em>str</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="aizynthfinder.utils.html#aizynthfinder.utils.exceptions.PolicyException" title="aizynthfinder.utils.exceptions.PolicyException"><strong>PolicyException</strong></a> – if the length of the model output vector is not same as the number of templates</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.expansion_strategies.TemplateBasedDirectExpansionStrategy.get_actions">
<span class="sig-name descname"><span class="pre">get_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">molecules</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_molecules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.expansion_strategies.TemplateBasedDirectExpansionStrategy.get_actions" title="Link to this definition">¶</a></dt>
<dd><p>Get all the probable actions of a set of molecules, using the selected policies and given cutoffs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>molecules</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em>) – the molecules to consider</p></li>
<li><p><strong>cache_molecules</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em><em>]</em>) – additional molecules to submit to the expansion
policy but that only will be cached for later use</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the actions and the priors of those actions</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction">RetroReaction</a>], List[float]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-aizynthfinder.context.policy.filter_strategies">
<span id="aizynthfinder-context-policy-filter-strategies-module"></span><h2>aizynthfinder.context.policy.filter_strategies module<a class="headerlink" href="#module-aizynthfinder.context.policy.filter_strategies" title="Link to this heading">¶</a></h2>
<p>Module containing classes that implements different filter policy strategies</p>
<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.FilterStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.filter_strategies.</span></span><span class="sig-name descname"><span class="pre">FilterStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>A base class for all filter strategies.</p>
<p>The filter can be applied by either calling the <cite>apply</cite> method
of by calling the instantiated class with a reaction.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="n">MyFilterStrategy</span><span class="p">(</span><span class="s2">&quot;dummy&quot;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="nb">filter</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">reaction</span><span class="p">)</span>
<span class="nb">filter</span><span class="p">(</span><span class="n">reaction</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.FilterStrategy.apply">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the filter on the reaction. If the reaction
should be rejected a <cite>RejectionException</cite> is raised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to filter</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction should be rejected.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.BondFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.filter_strategies.</span></span><span class="sig-name descname"><span class="pre">BondFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.BondFilter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy" title="aizynthfinder.context.policy.filter_strategies.FilterStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterStrategy</span></code></a></p>
<p>Check if focussed bonds to freeze stay frozen in a reaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.BondFilter.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.BondFilter.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the filter on the reaction. If the reaction
should be rejected a <cite>RejectionException</cite> is raised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to filter</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction should be rejected.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.QuickKerasFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.filter_strategies.</span></span><span class="sig-name descname"><span class="pre">QuickKerasFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.QuickKerasFilter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy" title="aizynthfinder.context.policy.filter_strategies.FilterStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterStrategy</span></code></a></p>
<p>Filter quick-filter trained on artificial negative data</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_remote_models</strong> – a boolean to connect to remote TensorFlow servers. Defaults
to False.</p></li>
<li><p><strong>filter_cutoff</strong> – the cut-off value</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>model</strong> – the source of the policy model</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.QuickKerasFilter.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.QuickKerasFilter.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the filter on the reaction. If the reaction
should be rejected a <cite>RejectionException</cite> is raised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to filter</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction should be rejected.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.QuickKerasFilter.feasibility">
<span class="sig-name descname"><span class="pre">feasibility</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.QuickKerasFilter.feasibility" title="Link to this definition">¶</a></dt>
<dd><p>Computes if a given reaction is feasible by given
the reaction fingerprint to a network model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to query</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction is feasible</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[bool, float]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.ReactantsCountFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.filter_strategies.</span></span><span class="sig-name descname"><span class="pre">ReactantsCountFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.ReactantsCountFilter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy" title="aizynthfinder.context.policy.filter_strategies.FilterStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterStrategy</span></code></a></p>
<p>Check that the number of reactants is was expected from the template</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.ReactantsCountFilter.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.ReactantsCountFilter.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the filter on the reaction. If the reaction
should be rejected a <cite>RejectionException</cite> is raised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to filter</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction should be rejected.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.FrozenSubstructureFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.filter_strategies.</span></span><span class="sig-name descname"><span class="pre">FrozenSubstructureFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.FrozenSubstructureFilter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy" title="aizynthfinder.context.policy.filter_strategies.FilterStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterStrategy</span></code></a></p>
<p>Filter for rejecting reactions that break up substructures</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key or label</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p></li>
<li><p><strong>smarts_list</strong> – the SMARTS patterns of the sub-structures</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.filter_strategies.FrozenSubstructureFilter.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.filter_strategies.FrozenSubstructureFilter.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the filter on the reaction. If the reaction
should be rejected a <cite>RejectionException</cite> is raised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to filter</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction should be rejected.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-aizynthfinder.context.policy.policies">
<span id="aizynthfinder-context-policy-policies-module"></span><h2>aizynthfinder.context.policy.policies module<a class="headerlink" href="#module-aizynthfinder.context.policy.policies" title="Link to this heading">¶</a></h2>
<p>Module containing classes that interfaces neural network policies</p>
<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.ExpansionPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.policies.</span></span><span class="sig-name descname"><span class="pre">ExpansionPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.ExpansionPolicy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.collection.ContextCollection" title="aizynthfinder.context.collection.ContextCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextCollection</span></code></a></p>
<p>An abstraction of an expansion policy.</p>
<p>This policy provides actions that can be applied to a molecule</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.ExpansionPolicy.get_actions">
<span class="sig-name descname"><span class="pre">get_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">molecules</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_molecules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.get_actions" title="Link to this definition">¶</a></dt>
<dd><p>Get all the probable actions of a set of molecules, using the selected policies</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>molecules</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em>) – the molecules to consider</p></li>
<li><p><strong>cache_molecules</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.mol.TreeMolecule" title="aizynthfinder.chem.mol.TreeMolecule"><em>TreeMolecule</em></a><em>]</em>) – additional molecules that potentially are sent to
the expansion model but for which predictions are not returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the actions and the priors of those actions</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>PolicyException: if the policy isn’t selected</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[List[<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction">RetroReaction</a>], List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.ExpansionPolicy.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.load" title="Link to this definition">¶</a></dt>
<dd><p>Add a pre-initialized expansion strategy object to the policy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference internal" href="#aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy" title="aizynthfinder.context.policy.expansion_strategies.ExpansionStrategy"><em>ExpansionStrategy</em></a>) – the item to add</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.ExpansionPolicy.load_from_config">
<span class="sig-name descname"><span class="pre">load_from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.load_from_config" title="Link to this definition">¶</a></dt>
<dd><p>Load one or more expansion policy from a configuration</p>
<p>The format should be
key:</p>
<blockquote>
<div><p>type: name of the expansion class or custom_package.custom_model.CustomClass
model: path_to_model
template: path_to_templates
other settings or params</p>
</div></blockquote>
<p>or
key:</p>
<blockquote>
<div><ul class="simple">
<li><p>path_to_model</p></li>
<li><p>path_to_templates</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>Any</em>) – the configuration</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.ExpansionPolicy.reset_cache">
<span class="sig-name descname"><span class="pre">reset_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.ExpansionPolicy.reset_cache" title="Link to this definition">¶</a></dt>
<dd><p>Reset the cache on all loaded policies</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.FilterPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aizynthfinder.context.policy.policies.</span></span><span class="sig-name descname"><span class="pre">FilterPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.FilterPolicy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.collection.ContextCollection" title="aizynthfinder.context.collection.ContextCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextCollection</span></code></a></p>
<p>An abstraction of a filter policy.</p>
<p>This policy provides a query on a reaction to determine whether it should be rejected</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="aizynthfinder.context.html#aizynthfinder.context.config.Configuration" title="aizynthfinder.context.config.Configuration"><em>Configuration</em></a>) – the configuration of the tree search</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.FilterPolicy.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.FilterPolicy.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the all the selected filters on the reaction. If the reaction
should be rejected a <cite>RejectionException</cite> is raised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reaction</strong> (<a class="reference internal" href="aizynthfinder.chem.html#aizynthfinder.chem.reaction.RetroReaction" title="aizynthfinder.chem.reaction.RetroReaction"><em>RetroReaction</em></a>) – the reaction to filter</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>if the reaction should be rejected or if a policy is selected</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.FilterPolicy.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.FilterPolicy.load" title="Link to this definition">¶</a></dt>
<dd><p>Add a pre-initialized filter strategy object to the policy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference internal" href="#aizynthfinder.context.policy.filter_strategies.FilterStrategy" title="aizynthfinder.context.policy.filter_strategies.FilterStrategy"><em>FilterStrategy</em></a>) – the item to add</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.FilterPolicy.load_from_config">
<span class="sig-name descname"><span class="pre">load_from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.FilterPolicy.load_from_config" title="Link to this definition">¶</a></dt>
<dd><p>Load one or more filter policy from a configuration</p>
<p>The format should be
key:</p>
<blockquote>
<div><p>type: name of the filter class or custom_package.custom_model.CustomClass
model: path_to_model
other settings or params</p>
</div></blockquote>
<p>or
key: path_to_model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>Any</em>) – the configuration</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aizynthfinder.context.policy.policies.FilterPolicy.reset_cache">
<span class="sig-name descname"><span class="pre">reset_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aizynthfinder.context.policy.policies.FilterPolicy.reset_cache" title="Link to this definition">¶</a></dt>
<dd><p>Reset filtering cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-aizynthfinder.context.policy.utils">
<span id="aizynthfinder-context-policy-utils-module"></span><h2>aizynthfinder.context.policy.utils module<a class="headerlink" href="#module-aizynthfinder.context.policy.utils" title="Link to this heading">¶</a></h2>
<p>Module containing helper routines for policies</p>
</section>
<section id="module-aizynthfinder.context.policy">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-aizynthfinder.context.policy" title="Link to this heading">¶</a></h2>
<p>Sub-package containing policy routines</p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2020-2025, Molecular AI group.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/aizynthfinder.context.policy.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>